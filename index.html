<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Animate.fun</title>
  <link rel="stylesheet" href="/css/style.css"/>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap" rel="stylesheet"/>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/ScrollTrigger.min.js"></script>
</head>
<body>
  <div class="loader">Loading...</div>
  <div class="custom-cursor"></div>
  <main id="main-content">
    <section class="hero">
      <h1>Animate.fun</h1>
      <p>Interactive creative animation playground</p>
      <button class="explore-btn">Start Exploring</button>
    </section>
    <section class="experiments">
      <h2>Experiments</h2>
      <div class="experiment-list">
        <a class="experiment-card" href="/experiments/gravity-balls.html">
          <div class="title">Gravity Balls</div>
          <div class="subtitle">GSAP Physics Playground</div>
        </a>
        <a class="experiment-card" href="/experiments/shader-playground.html">
          <div class="title">Shader Playground</div>
          <div class="subtitle">Live Three.js Shaders</div>
        </a>
        <a class="experiment-card" href="/experiments/mouse-trails.html">
          <div class="title">Mouse Trails</div>
          <div class="subtitle">Creative pointer effects</div>
        </a>
        <a class="experiment-card" href="/experiments/timeline-lab.html">
          <div class="title">Timeline Lab</div>
          <div class="subtitle">Build GSAP timelines visually</div>
        </a>
        <a class="experiment-card" href="/experiments/morphing-shapes.html">
          <div class="title">Morphing Shapes</div>
          <div class="subtitle">SVG morph animations</div>
        </a>
        <a class="experiment-card" href="/experiments/parallax-worlds.html">
          <div class="title">Parallax Worlds</div>
          <div class="subtitle">Layered scroll-based parallax</div>
        </a>
      </div>
    </section>
  </main>

  <!-- Fullscreen overlay container for running games -->
  <div id="experiment-overlay" style="
    position: fixed;
    inset: 0;
    background-color: #000;
    color: #0af;
    display: none;
    flex-direction: column;
    justify-content: center;
    align-items: center;
    z-index: 10000;
    font-size: 1.5rem;
    user-select: none;
    padding: 2rem;
    overflow: auto;
  ">
    <button id="overlay-close-btn" style="
      position: fixed;
      top: 10px;
      right: 10px;
      font-size: 2rem;
      background: transparent;
      color: #0af;
      border: none;
      cursor: pointer;
      z-index: 10001;
    ">× Close</button>
    <div id="experiment-content" style="width: 100%; height: 100%; overflow: auto;"></div>
  </div>

  <script>
    (() => {
      const overlay = document.getElementById('experiment-overlay');
      const contentContainer = document.getElementById('experiment-content');
      const closeBtn = document.getElementById('overlay-close-btn');

      // Sample datasets — replace these with your full 200-5000 lines of game code per experiment
const datasets = {
  gravityBalls: {
    name: "Gravity Balls",
    description: "Physics-based ball simulation with GSAP entry animations",
    settings: {
      ballCount: 50,
      restitution: 0.9,
      gravity: 1,
      colors: ["#ff5f6d", "#fbc531", "#00a8ff", "#4cd137", "#9c88ff"]
    }
  },
  shaderPlayground: {
    name: "Shader Playground",
    description: "Live Three.js shaders with animated color waves",
    settings: {
      fragmentShader: "void main(){float r=abs(sin(gl_FragCoord.x*0.01));float g=abs(sin(gl_FragCoord.y*0.01));float b=0.5;gl_FragColor=vec4(r,g,b,1.0);}",
      backgroundColor: "#000"
    }
  },
  mouseTrails: {
    name: "Mouse Trails",
    description: "GSAP-enhanced pointer trails",
    settings: {
      trailMax: 150,
      trailColor: "#fff",
      trailRadius: 5,
      fadeSpeed: 0.05
    }
  },
  timelineLab: {
    name: "Timeline Lab",
    description: "Build GSAP timelines with interactive transforms",
    settings: {
      rotateTarget: "h1",
      duration: 2,
      ease: "power1.inOut",
      scale: 1.5
    }
  },
  morphingShapes: {
    name: "Morphing Shapes",
    description: "SVG path morph animations with color transitions",
    settings: {
      from: "M50 50 L150 50 L150 150 L50 150 Z",
      to: "M100,50 a50,50 0 1,0 0,100 a50,50 0 1,0 0,-100",
      duration: 2,
      fillColors: ["#f39c12", "#e74c3c", "#8e44ad"]
    }
  },
  parallaxWorlds: {
    name: "Parallax Worlds",
    description: "Layered parallax with GSAP ScrollTrigger",
    settings: {
      layers: 5,
      colors: ["#1e90ff", "#ff5f6d", "#fbc531", "#4cd137", "#9c88ff"],
      depths: [0.1, 0.3, 0.5, 0.7, 0.9]
    }
  },
  particleSwarm: {
    name: "Particle Swarm",
    description: "Interactive particle swarm with GSAP-driven speed",
    settings: {
      particleCount: 300,
      particleColor: "#00cec9",
      speed: 1.5,
      radius: 4
    }
  },
  colorWaveSynth: {
    name: "Color Wave Synth",
    description: "GSAP harmonic wave animations with color shifts",
    settings: {
      frequency: 0.1,
      amplitude: 50,
      baseColor: "#1abc9c",
      cycleSpeed: 2
    }
  },
  cubeMaze3D: {
    name: "3D Cube Maze",
    description: "First-person GSAP-enhanced Three.js maze explorer",
    settings: {
      size: 12,
      cellSize: 4,
      wallColor: "#d63031",
      playerSpeed: 3
    }
  },
  fractalExplorer: {
    name: "Fractal Explorer",
    description: "Animated Mandelbrot fractal explorer with GSAP zoom",
    settings: {
      maxIterations: 800,
      zoomFactor: 2,
      palette: ["#000", "#0984e3", "#6c5ce7", "#fd79a8"],
      zoomSpeed: 1.2
    }
  },
  bouncingPolygons: {
    name: "Bouncing Polygons",
    description: "Polygon physics with GSAP scaling effects",
    settings: {
      polygonCount: 20,
      sides: 5,
      bounce: 0.8,
      scale: 1.3,
      color: "#fab1a0"
    }
  },
  colorRipple: {
    name: "Color Ripple",
    description: "GSAP-based ripple wave with interactive triggers",
    settings: {
      waveSize: 50,
      waveSpeed: 0.5,
      colorSet: ["#00b894", "#fdcb6e", "#e17055"]
    }
  },
  fireworksShow: {
    name: "Fireworks Show",
    description: "Animated fireworks using GSAP and canvas",
    settings: {
      fireworkCount: 30,
      particleBurst: 100,
      colors: ["#ff7675", "#74b9ff", "#ffeaa7"],
      speed: 3
    }
  },
  neonTunnel: {
    name: "Neon Tunnel",
    description: "GSAP and Three.js neon tunnel with motion blur",
    settings: {
      tunnelLength: 50,
      speed: 2,
      neonColors: ["#e84393", "#0984e3", "#00cec9"]
    }
  },
  shapeRain: {
    name: "Shape Rain",
    description: "Shapes falling with GSAP bounce and random colors",
    settings: {
      shapeCount: 100,
      fallSpeed: 2,
      colors: ["#6c5ce7", "#fd79a8", "#00cec9"],
      gravity: 0.5
    }
  },
  gsapCarousel: {
    name: "GSAP Carousel",
    description: "Interactive rotating carousel with color transitions",
    settings: {
      items: 6,
      rotationSpeed: 1,
      scaleEffect: 1.2,
      colorPalette: ["#fbc531", "#ff5f6d", "#4cd137"]
    }
  },
  lightningStrikes: {
    name: "Lightning Strikes",
    description: "Random lightning effects using GSAP and canvas",
    settings: {
      strikeCount: 5,
      color: "#ffffff",
      flashDuration: 0.2,
      flashStrength: 1.5
    }
  },
  waveParticles: {
    name: "Wave Particles",
    description: "Particle wave patterns with GSAP frequency modulation",
    settings: {
      particleCount: 150,
      waveFrequency: 0.2,
      amplitude: 60,
      baseColor: "#1e90ff"
    }
  },
  glowStars: {
    name: "Glow Stars",
    description: "Interactive starfield with GSAP glow animation",
    settings: {
      starCount: 500,
      glowColor: "#f1c40f",
      twinkleSpeed: 1
    }
  },
  smoothScrollGallery: {
    name: "Smooth Scroll Gallery",
    description: "Image gallery with GSAP smooth scroll and parallax layers",
    settings: {
      imageCount: 10,
      transitionDuration: 1,
      parallaxDepths: [0.1,0.2,0.3,0.4,0.5],
      colorOverlay: "#2ecc71"
    }
  }
};

      // Attach click handler to experiment cards
      document.querySelectorAll('.experiment-card').forEach(card => {
        card.addEventListener('click', e => {
          e.preventDefault();
          const href = card.getAttribute('href');
          if(!datasets[href]) {
            alert('Dataset not found for this experiment.');
            return;
          }
          openOverlay(href);
        });
      });

      function openOverlay(href) {
        overlay.style.display = 'flex';
        contentContainer.innerHTML = '<p style="color:#0af;">Loading dataset...</p>';

        // Clear any previous content
        while(contentContainer.firstChild) contentContainer.removeChild(contentContainer.firstChild);

        setTimeout(() => {
          try {
            // Run dataset code string, passing required globals
            new Function('document', 'window', 'overlay', 'contentContainer', datasets[href])(document, window, overlay, contentContainer);
          } catch(err) {
            contentContainer.innerHTML = `<p style="color:#f00;">Error loading experiment: ${err.message}</p>`;
            console.error(err);
          }
        }, 700);
      }

      function closeOverlay() {
        overlay.style.display = 'none';
        contentContainer.innerHTML = '';
      }

      closeBtn.addEventListener('click', closeOverlay);
    })();
  </script>

</body>
</html>
